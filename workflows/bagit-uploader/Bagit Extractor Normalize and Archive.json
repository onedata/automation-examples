{
  "supplementaryAtmLambdas": {
    "ff01a2847debd68a4424efde0d6015dbch17d0": {
      "summary": "",
      "schemaFormatVersion": 1,
      "resultSpecs": [
        {
          "name": "logs",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        },
        {
          "name": "exception",
          "isBatch": false,
          "dataSpec": {
            "valueConstraints": {},
            "type": "string"
          }
        }
      ],
      "operationSpec": {
        "engine": "openfaas",
        "dockerImage": "docker.onedata.org/bagit-uploader-convert-files:v9",
        "dockerExecutionOptions": {
          "readonly": false,
          "oneclientOptions": "-i",
          "oneclientMountPoint": "/mnt/onedata",
          "mountOneclient": true
        }
      },
      "name": "bagit-uploader-convert-files-v9",
      "description": "",
      "checksum": "8b24be91c173240946e4319c303858a6",
      "argumentSpecs": [
        {
          "name": "filePath",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {},
            "type": "string"
          }
        }
      ]
    },
    "ea351c2fa6396428d1f0bcdb7543ebecchb1bd": {
      "summary": "",
      "schemaFormatVersion": 1,
      "resultSpecs": [
        {
          "name": "validBagitArchives",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "REG"
            },
            "type": "file"
          }
        },
        {
          "name": "logs",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        }
      ],
      "operationSpec": {
        "engine": "openfaas",
        "dockerImage": "docker.onedata.org/bagit-uploader-validate:v9",
        "dockerExecutionOptions": {
          "readonly": false,
          "oneclientOptions": "-i",
          "oneclientMountPoint": "/mnt/onedata",
          "mountOneclient": true
        }
      },
      "name": "bagit-uploader-validate-v9",
      "description": "",
      "checksum": "11ddcf21b0f4a1abb0ce9aec233e8b81",
      "argumentSpecs": [
        {
          "name": "archives",
          "isOptional": false,
          "isBatch": true,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "ANY"
            },
            "type": "file"
          }
        }
      ]
    },
    "d092f72979fedc36d965143bda3dd725ch815f": {
      "summary": "",
      "schemaFormatVersion": 1,
      "resultSpecs": [
        {
          "name": "filesToFetch",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        },
        {
          "name": "logs",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        },
        {
          "name": "exception",
          "isBatch": false,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "REG"
            },
            "type": "file"
          }
        }
      ],
      "operationSpec": {
        "engine": "openfaas",
        "dockerImage": "docker.onedata.org/bagit-uploader-unpack-fetch:v10",
        "dockerExecutionOptions": {
          "readonly": false,
          "oneclientOptions": "-i",
          "oneclientMountPoint": "/mnt/onedata",
          "mountOneclient": true
        }
      },
      "name": "bagit-uploader-unpack-fetch-v10",
      "description": "",
      "checksum": "637a1666bb9e6c3adda06dcbca9b0771",
      "argumentSpecs": [
        {
          "name": "archive",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "REG"
            },
            "type": "file"
          }
        },
        {
          "name": "destination",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "DIR"
            },
            "type": "file"
          }
        }
      ]
    },
    "cc1e4b47e112b4ec8eda04e24b28f8f0ch88a0": {
      "summary": "",
      "schemaFormatVersion": 1,
      "resultSpecs": [
        {
          "name": "response",
          "isBatch": false,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        },
        {
          "name": "exception",
          "isBatch": false,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "DIR"
            },
            "type": "file"
          }
        },
        {
          "name": "logs",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        }
      ],
      "operationSpec": {
        "engine": "openfaas",
        "dockerImage": "docker.onedata.org/bagit-uploader-archive-destination:v5",
        "dockerExecutionOptions": {
          "readonly": false,
          "oneclientOptions": "-i",
          "oneclientMountPoint": "/mnt/onedata",
          "mountOneclient": true
        }
      },
      "name": "bagit-uploader-archive-destination-v5",
      "description": "",
      "checksum": "3e8d0262c1f770d0c30ce018516f5078",
      "argumentSpecs": [
        {
          "name": "destination",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "DIR"
            },
            "type": "file"
          }
        },
        {
          "name": "credentials",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {},
            "type": "onedatafsCredentials"
          }
        }
      ]
    },
    "1265ad258f1045a0b23bb7408c5024abchffec": {
      "summary": "",
      "schemaFormatVersion": 1,
      "resultSpecs": [
        {
          "name": "uploadedFiles",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "string"
          }
        },
        {
          "name": "logs",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        },
        {
          "name": "exception",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        }
      ],
      "operationSpec": {
        "engine": "openfaas",
        "dockerImage": "docker.onedata.org/bagit-uploader-fetch-files:22",
        "dockerExecutionOptions": {
          "readonly": false,
          "oneclientOptions": "-i",
          "oneclientMountPoint": "/mnt/onedata",
          "mountOneclient": true
        }
      },
      "name": "bagit-uploader-fetch-files-v22",
      "description": "",
      "checksum": "95e6388c1174fa092580369c445d7e2c",
      "argumentSpecs": [
        {
          "name": "filesToFetch",
          "isOptional": false,
          "isBatch": true,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        }
      ]
    },
    "1265400a866f544b12a17ce7b432522bch2d82": {
      "summary": "",
      "schemaFormatVersion": 1,
      "resultSpecs": [
        {
          "name": "uploadedFiles",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "string"
          }
        },
        {
          "name": "logs",
          "isBatch": true,
          "dataSpec": {
            "valueConstraints": {},
            "type": "object"
          }
        }
      ],
      "operationSpec": {
        "engine": "openfaas",
        "dockerImage": "docker.onedata.org/bagit-uploader-unpack-data:v3",
        "dockerExecutionOptions": {
          "readonly": false,
          "oneclientOptions": "-i",
          "oneclientMountPoint": "/mnt/onedata",
          "mountOneclient": true
        }
      },
      "name": "bagit-uploader-unpack-data-v3",
      "description": "",
      "checksum": "dcb356e014164b3101e430f7224d6b24",
      "argumentSpecs": [
        {
          "name": "archive",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "REG"
            },
            "type": "file"
          }
        },
        {
          "name": "destination",
          "isOptional": false,
          "isBatch": false,
          "defaultValue": null,
          "dataSpec": {
            "valueConstraints": {
              "fileType": "DIR"
            },
            "type": "file"
          }
        }
      ]
    }
  },
  "stores": [
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "valid-bagit-archives",
      "id": "70e2bacd2140d98ab47f4d410916e5c046fd84",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {
          "fileType": "REG"
        },
        "type": "file"
      }
    },
    {
      "type": "singleValue",
      "requiresInitialValue": true,
      "name": "destination",
      "id": "c4cd78e53e595960c7294873de51c6a003b8dc",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {
          "fileType": "DIR"
        },
        "type": "file"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "uploaded-files",
      "id": "efe47b7a2edcc94b070e249b06f3c94f9ab7dc",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "string"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "files-to-fetch",
      "id": "49c0cda6fe0d7fa75faf6bffeb5f81fbe96337",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "object"
      }
    },
    {
      "type": "treeForest",
      "requiresInitialValue": true,
      "name": "input-bagit-archives",
      "id": "0b4510e4f358b7abe9d3d6a364b8dade118eee",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {
          "fileType": "ANY"
        },
        "type": "file"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "logs-store",
      "id": "392c567c533a40fc7d95a63526d64ee2f9bb34",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "object"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "files-to-fetch-retry-1",
      "id": "88470559bb0fc56e912c6e675004446426f3cf",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "object"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "files-to-fetch-retry-2",
      "id": "b122c8065d71d6764fdb33ade46a8a9a0ee990",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "object"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "checksums-info",
      "id": "ad6ea48d248829f608e9e9c429f292966eb8cd",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "object"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "calculate-checksum-retry-1",
      "id": "cc0c89afd30dd0b964426338f71db4c4ee91a2",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "string"
      }
    },
    {
      "type": "list",
      "requiresInitialValue": false,
      "name": "archive-info",
      "id": "d9007d24700acb37b3bda55059d1dc0edd677f",
      "description": "",
      "defaultInitialValue": null,
      "dataSpec": {
        "valueConstraints": {},
        "type": "object"
      }
    }
  ],
  "state": "ready",
  "schemaFormatVersion": 1,
  "name": "Bagit Extractor Normalize and Archive",
  "lanes": [
    {
      "storeIteratorSpec": {
        "strategy": {
          "type": "batch",
          "batchSize": 2
        },
        "storeSchemaId": "0b4510e4f358b7abe9d3d6a364b8dade118eee"
      },
      "parallelBoxes": [
        {
          "tasks": [
            {
              "resultMappings": [
                {
                  "storeSchemaId": "70e2bacd2140d98ab47f4d410916e5c046fd84",
                  "resultName": "validBagitArchives",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-validate-v9",
              "lambdaId": "ea351c2fa6396428d1f0bcdb7543ebecchb1bd",
              "id": "e582f3b5c8040b0f67b11c2c1aaa251fc62f9f",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "archives"
                }
              ]
            }
          ],
          "name": "Parallel box",
          "id": "ab4c4379ac1dfd6474defd59d96aaf92651613"
        }
      ],
      "name": "validate",
      "id": "bc148a50dd1eb498c048fd5baceb974bc4069e"
    },
    {
      "storeIteratorSpec": {
        "strategy": {
          "type": "serial"
        },
        "storeSchemaId": "70e2bacd2140d98ab47f4d410916e5c046fd84"
      },
      "parallelBoxes": [
        {
          "tasks": [
            {
              "resultMappings": [
                {
                  "storeSchemaId": "efe47b7a2edcc94b070e249b06f3c94f9ab7dc",
                  "resultName": "uploadedFiles",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-unpack-data-v3",
              "lambdaId": "1265400a866f544b12a17ce7b432522bch2d82",
              "id": "baecb3d1d58405559e9641437015a951425e6c",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "archive"
                },
                {
                  "valueBuilder": {
                    "valueBuilderType": "singleValueStoreContent",
                    "valueBuilderRecipe": "c4cd78e53e595960c7294873de51c6a003b8dc"
                  },
                  "argumentName": "destination"
                }
              ]
            },
            {
              "resultMappings": [
                {
                  "storeSchemaId": "49c0cda6fe0d7fa75faf6bffeb5f81fbe96337",
                  "resultName": "filesToFetch",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-unpack-fetch-v10",
              "lambdaId": "d092f72979fedc36d965143bda3dd725ch815f",
              "id": "974ba26c092c6c202df98e1862b7f94e134a40",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "archive"
                },
                {
                  "valueBuilder": {
                    "valueBuilderType": "singleValueStoreContent",
                    "valueBuilderRecipe": "c4cd78e53e595960c7294873de51c6a003b8dc"
                  },
                  "argumentName": "destination"
                }
              ]
            }
          ],
          "name": "Parallel box",
          "id": "16a5f0d2cd2c71675f5e7906d8c251ecb464d3"
        }
      ],
      "name": "unpack",
      "id": "4b5da73192bcf36f4da6890df203a6d20ded53"
    },
    {
      "storeIteratorSpec": {
        "strategy": {
          "type": "batch",
          "batchSize": 1
        },
        "storeSchemaId": "49c0cda6fe0d7fa75faf6bffeb5f81fbe96337"
      },
      "parallelBoxes": [
        {
          "tasks": [
            {
              "resultMappings": [
                {
                  "storeSchemaId": "efe47b7a2edcc94b070e249b06f3c94f9ab7dc",
                  "resultName": "uploadedFiles",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "88470559bb0fc56e912c6e675004446426f3cf",
                  "resultName": "exception",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-fetch-files-v22",
              "lambdaId": "1265ad258f1045a0b23bb7408c5024abchffec",
              "id": "f2ce5b6431de9f6533759753499143e5995182",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "filesToFetch"
                }
              ]
            }
          ],
          "name": "Parallel box",
          "id": "44b8b864ab3f3bcd1f1e880ca72e17867e0c00"
        }
      ],
      "name": "fetch",
      "id": "3c75a2527a64ebe67cd2adc7aae0d4ed984989"
    },
    {
      "storeIteratorSpec": {
        "strategy": {
          "type": "batch",
          "batchSize": 1
        },
        "storeSchemaId": "88470559bb0fc56e912c6e675004446426f3cf"
      },
      "parallelBoxes": [
        {
          "tasks": [
            {
              "resultMappings": [
                {
                  "storeSchemaId": "efe47b7a2edcc94b070e249b06f3c94f9ab7dc",
                  "resultName": "uploadedFiles",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-fetch-files-v22",
              "lambdaId": "1265ad258f1045a0b23bb7408c5024abchffec",
              "id": "6d84637d7c7b5796fdacf8a7ce9ed40421cedd",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "filesToFetch"
                }
              ]
            }
          ],
          "name": "Parallel box",
          "id": "c97728202886171676db785d9d63961cccce7d"
        }
      ],
      "name": "fetch-retry-1",
      "id": "364701161d47637f22824f7df1381239e93da0"
    },
    {
      "storeIteratorSpec": {
        "strategy": {
          "type": "serial"
        },
        "storeSchemaId": "efe47b7a2edcc94b070e249b06f3c94f9ab7dc"
      },
      "parallelBoxes": [
        {
          "tasks": [
            {
              "resultMappings": [
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-convert-files-v9",
              "lambdaId": "ff01a2847debd68a4424efde0d6015dbch17d0",
              "id": "366364fc9553efc5b3ced563c238810fd7831b",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "filePath"
                }
              ]
            }
          ],
          "name": "Parallel box",
          "id": "f9fde9b6313959c189aa58fee05b6599e36c01"
        }
      ],
      "name": "convert-files",
      "id": "87852fec2e3104ab069ab3b5181ecb10acaaf1"
    },
    {
      "storeIteratorSpec": {
        "strategy": {
          "type": "serial"
        },
        "storeSchemaId": "c4cd78e53e595960c7294873de51c6a003b8dc"
      },
      "parallelBoxes": [
        {
          "tasks": [
            {
              "resultMappings": [
                {
                  "storeSchemaId": "d9007d24700acb37b3bda55059d1dc0edd677f",
                  "resultName": "response",
                  "dispatchFunction": "append"
                },
                {
                  "storeSchemaId": "CURRENT_TASK_SYSTEM_AUDIT_LOG",
                  "resultName": "logs",
                  "dispatchFunction": "append"
                }
              ],
              "name": "bagit-uploader-archive-destination-v5",
              "lambdaId": "cc1e4b47e112b4ec8eda04e24b28f8f0ch88a0",
              "id": "87e7e6d8529f57c10aa7f848c42160b175e657",
              "argumentMappings": [
                {
                  "valueBuilder": {
                    "valueBuilderType": "iteratedItem",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "destination"
                },
                {
                  "valueBuilder": {
                    "valueBuilderType": "onedatafsCredentials",
                    "valueBuilderRecipe": null
                  },
                  "argumentName": "credentials"
                }
              ]
            }
          ],
          "name": "Parallel box",
          "id": "9368a0376086c8097bbb9f15c7f73611931171"
        }
      ],
      "name": "archive-destination",
      "id": "aa43a0d2c1e6cf3ce1b87999181d6f6914a770"
    }
  ],
  "description": "Automation workflow which extracts files from a bagit and normalizes them to long-term preservation formats.",
  "atmWorkflowSchemaId": "d3d027d7cfd536b4351d8e00d91d0db6ch526c"
}